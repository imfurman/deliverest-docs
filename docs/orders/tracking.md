# Мониторинг доставки

Deliverest визуализирует доставку в модуле `OrdersMapController` и в мобильном приложении курьеров.

## Карта заказов

- Доступна по адресу `/admin/orders_map`.
- Загружает данные через сервис `orders_map_manager`, который формирует тепловые карты по датам.
- Поддерживает сравнение с предыдущими периодами (`fromDiff` / `toDiff`) для анализа трендов.
- Карточки заказов кликабельны: отсюда можно открыть заказ, посмотреть маршрут и связаться с курьером.

## Карта курьеров

- `/admin/couriersMap` отображает активных курьеров, их статус (доставка, на базе, свободен) и количество заказов в пути.
- Курьеры передают координаты через API `Superdostavka\ApiBundle\Controller\CourierApi\CommonController`.
- Цвет индикатора зависит от SLA: зелёный — вовремя, жёлтый — риск, красный — просрочено.

## Уведомления и SLA

- Настройте пороги в разделе [Производительность](../settings/performance.md), чтобы диспетчер получал уведомления до нарушения SLA.
- События доставляются в панель в режиме реального времени через вебсокеты (Redis pub/sub).

## Отчётность

- Исторические данные по маршрутам доступны в отчётах `Отчет по цехам`, `Курьеры на карте` и `Водители по дням`.
- Для deeper-аналитики используйте экспорт в CSV/JSON и анализируйте данные в BI-системах.
