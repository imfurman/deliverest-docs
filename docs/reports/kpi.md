# KPI и аналитика

KPI-отчёты позволяют контролировать выполнение SLA, анализировать узкие места в цепочке «принятие → производство → доставка» и вовремя реагировать на риски.

## Контроль скорости доставки

- **KPI | Скорость доставки (цеха)** - Показывает долю опозданий, среднее время доставки и количество заказов в зоне риска. Сортируйте таблицу по опозданиям, чтобы увидеть проблемные цеха.
- **KPI | Скорость доставки (курьеры)** - Сравнивает скорость конкретных курьеров, помогает составлять смены и выявлять сотрудников, которым нужен доп. инструктаж.
- **KPI | Скорость доставки (курьеры, детализация)** - Раскрывает каждый заказ с достижением или нарушением SLA. Удобно для расследований и обучения.
- **Логи изменения времени доставки** - Показывает, кто вносил корректировки, какие комментарии оставлял и что в итоге произошло. Используйте, когда нужно подтвердить историю нарушений.
- **Рейсы и статусы** - дополняют KPI-характеристики визуальной шкалой: видно, сколько времени заказ был на каждом этапе и пересекались ли маршруты курьера.

## Принятие и подготовка заказов

- **Среднее время переходов между статусами** - Позволяет сравнить промежутки между любыми двумя статусами (например, «создан» → «принят»). Подходит для выявления задержек в колл-центре или на кухне.
- **Среднее время приёма заказов** - Фиксирует, сколько минут проходит между созданием заказа и его принятием оператором. Смотрите на тренд по цехам и часам.
- **Принятые заказы операторов** - Показывает успешность операторов: количество заказов, средний чек, способ подтверждения. Используйте вместе со «Средним временем переходов» для поиска точек роста в обучении.
- **KPI | Производительность** - Измеряет время от принятия до статуса «готов», указывает на проблемы в кухне.
- **KPI | Опоздания производства** - Сравнивает среднее время выполнения заказов, количество опозданий и объём выручки. Хороший индикатор для планёрки с шеф-поварами.
- **Производство: план vs факт** - Считает, на сколько минут кухня опережает или отстаёт от планового времени приготовления. Помогает выделить заказы, по которым нужен разбор.

## Пороговые значения и сигналы

- SLA-настройки задаются в разделе [Производительность](../settings/performance.md). Там можно определить разные пороги для доставки, самовывоза, агрегаторов.
- Изменив пороги, обязательно пересмотрите KPI-отчёты за несколько дней, чтобы убедиться, что новые правила отражают реальную работу.
- Для моментального контроля включите уведомления: при нарушении SLA система отправит сообщение менеджеру смены.

## Дашборды и визуализация

- **Панель «Производительность»** (`/admin/performanceManage/workshops`) показывает текущее состояние цехов: зелёные/жёлтые/красные индикаторы и прогноз на остаток смены.
- **Realtime-диспетчер** (`/admin/performance/workshops`) отображает заказы в пути, время на каждом этапе и подсвечивает задержки. Подходит для менеджера смены.
- **ConsolidatedReport** и **CommonReport** из блока аналитики помогают сопоставить KPI с финансовой картиной: можно увидеть, как задержки отражаются на выручке и отзывах.

## Практические приёмы

- Начинайте день с «KPI | Скорость доставки (цеха)» и «KPI | Скорость доставки (курьеры)», чтобы понять, на каком уровне была вчерашняя смена, и какие команды требуют внимания.
- При групповом обучении операторов используйте комбинацию «Среднее время переходов между статусами» + «Среднее время приёма заказов»: первый отчёт найдёт пиковые задержки, второй покажет, кто чаще всего их допускает.
- Если кухне не хватает скорости, сопоставьте «Производство: план vs факт» с «Загрузкой цехов»: возможно, в конкретное время было слишком много заказов, и стоит изменить планирование.
- Для клиентов с жалобами на опоздания поднимайте «KPI | Скорость доставки (курьеры, детализация)» и «Логи изменения времени доставки», а затем переходите к «Рейсам и статусам» — это даст аргументы для обратной связи и улучшения процесса.
