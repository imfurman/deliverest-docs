# Заказы

Раздел «Заказы» описывает операторскую панель Deliverest. Она построена на `Superdostavka\AdminBundle\OrderController` и объединяет полный цикл обработки: от приёма звонка до закрытия смены курьера.

## Основные возможности

- **Лента заказов** — быстрый доступ к активным, отложенным и завершённым заказам с обновлением статусов в реальном времени.
- **Карта курьеров** (`/admin/couriersMap`) — помогает диспетчеру видеть местоположение доставщиков и точку клиента, чтобы перераспределять заказы.
- **Операторы и роли** — доступ ограничивается ролями `ROLE_OPERATOR`, `ROLE_CASHIER`, `ROLE_FEEDBACK_MANAGER`. Это позволяет выделять команды на разные сценарии.
- **Шаблоны чеков** — калькулятор `order_calculator` формирует счёт, учитывая скидки, бонусы и способы оплаты.
- **Экспорт и интеграции** — через `order_export->xmlFileExport()` заказы выгружаются в XML для сторонних систем.

## Процесс оформления

1. **Создание** — оператор может завести заказ с нуля (`/admin/order/operator/new`) или найти клиента по телефону (`/admin/newOrder/{phone}`).
2. **Компоновка** — через карточку заказа добавляются позиции, допы, применяется промокод и проверяется доставка на выбранную станцию.
3. **Подтверждение** — система записывает историю в `OrderStatusLog`, фиксирует время приготовления и назначает курьера.
4. **Доставка** — курьер подтверждает статусы через мобильное приложение; мониторинг отображается в модуле «Мониторинг доставки».
5. **Закрытие** — оператор печатает чек, принимает оплату, при необходимости формирует акт инкассации.

## Настройки и автоматизации

- Конфиг `operator-panel-links` позволяет добавить быстрые ссылки в хлебные крошки операторской панели.
- Включите модуль «Производительность», чтобы система подсказывала перегруженные цеха и предлагала перенос готовки.
- Используйте `makeEmptyOrder` для моментального создания черновика заказа, если клиент ещё не определился с блюдами.

## Полезные материалы

- [Лента заказов](list.md) — о работе с таблицей и массовых действиях.
- [Поиск и фильтры](filters.md) — про сохранённые выборки.
- [Мониторинг доставки](tracking.md) — как анализировать работу курьеров.
