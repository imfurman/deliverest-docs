# Подарочные позиции

Подарки управляются в `/admin/new/settings/giftPositions` и `/admin/giftPosition`. Они интегрированы с каталогом и бонусной программой.

## Настройка подарка

- Выберите позицию или добавочное блюдо, которое будет выдаваться бесплатно.
- Задайте условия: акция, промокод, сегмент клиента, минимальная сумма.
- Установите ограничения по количеству на заказ/пользователя.

## Выдача

- Подарок автоматически подставляется в корзину, но клиент может отказаться.
- В чеке отображается как «Подарок» с ценой `0` и пометкой акции.
- Себестоимость фиксируется в отчётах для корректного учёта маржинальности.

## Контроль

- Используйте отчёт «Подарочные позиции», чтобы отслеживать выдачу и попадания в стоп-лист.
- При необходимости временно отключайте подарок через стоп-лист или расписание.
- Для офлайн-точек можно печатать специальные стикеры с QR-кодом подарка.

## Модуль «Подарок от шефа»

Модуль оформляет подарки как отдельный сценарий на витрине и в корзине.

1. Включите переключатель `project.chef_gift.enabled` в [конфигурациях](../settings/configs.md). После сохранения в корзине появится блок «Подарок от шефа».
2. Создайте подарочную позицию (см. выше) и свяжите её с нужной акцией или сегментом.
3. Настройте промо-навигацию:
   - В слайдере (`Настройки → Слайдер`) выберите тип «Модальное» и укажите шаблон `giftPositionsModal`.
   - Если нужна кнопка внутри баннера, используйте произвольный HTML: `<a ng-click="toggleModal('giftPositionsModal', true, true)">...</a>`.
4. Проверьте сценарий: оформите заказ с акцией, убедитесь, что подарок добавляется автоматически и клиент видит сообщение в модальном окне.

Советы:

- Комбинируйте модуль с push-рассылками и баннерами на главной — клиенты быстрее замечают подарок.
- Для разных городов пропишите условия в JSON-конфиге (например, разные подарки в зависимости от `city_id`).
- Если подарок ограничен по складу, добавьте уведомление в [всплывающий баннер](popups.md), чтобы приостановить промо за пару кликов.
