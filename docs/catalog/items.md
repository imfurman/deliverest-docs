# Позиции

Позиции управляются через `AdminBundle\PositionController` и Propel-модели `Position`, `PositionCity`, `PositionPromocode`.

## Создание и редактирование

1. Перейдите в `/admin/position`.
2. Выберите раздел каталога или создайте новый.
3. Нажмите «Добавить позицию» — откроется форма с вкладками:
   - **Основное** — название, описание, состав, изображение, привязка к цеху.
   - **Цены** — блок `positionCities`, где задаются цена, старая цена, лимит и статус по каждому городу.
   - **Модификации** — добавление вариантов размеров или теста (см. [Модификации](modifiers.md)).
   - **Маркетинг** — автоматическое создание промокода при публикации в мобильном приложении (`startPosition`).

Форма поддерживает автосохранение черновиков и проверку обязательных полей.

## Важные элементы

- **Промокоды для стартовых позиций** — если позиция помечена как стартовая в мобильном приложении, сервис `promocode_helper` автоматически создаёт четырёхзначный код.
- **Прайсы по городам** — таблица `PositionCity` хранит файлы цен; можно иметь разные цены, скидки и доступность.
- **SEO и теги** — используйте блок ссылок и метаданных, чтобы позиция корректно отображалась на лендингах.

## Массовые операции

- Импорт/экспорт через CSV/JSON.
- Групповое обновление цен — выберите позиции, задайте коэффициент или новую цену и сохраните.
- Обновление в API — после сохранения вызывается `catalog_cache_warmer`, чтобы фронт получил актуальные данные.

## Связанные материалы

- [Добавочные позиции](additions.md) — допы, которые привязываются к позициям.
- [Рекомендации](recommendations.md) — апселл и кросселл.
- [Ярлыки](labels.md) — визуальные бейджи для витрины.
