# Бонусные уровни

Бонусные уровни находятся в `/admin/new/settings/bonuses` и реализованы в `BonusBundle`. Система поддерживает накопление баллов и динамическое изменение уровня клиента.

## Логика уровней

- Для каждого уровня задаются: название, требуемые баллы, коэффициент накопления, срок действия.
- Существуют автоматические сценарии понижения уровня при длительном простое.
- Можно определить дополнительные привилегии: повышенный кешбэк, персональные промокоды, доступ к эксклюзивным меню.

## Расчёт баллов

- Баллы начисляются при оплате заказа, выполнении условий акции, использовании жетонов.
- Правила расчёта задаются в конфиге `bonus_rules` (минимальная сумма, исключения, доля оплаты бонусами).
- Поддерживается ручная корректировка баллов через панель оператора.

## Коммуникации

- При смене уровня автоматически отправляется push/SMS (шаблоны — [Шаблоны сообщений](../messaging/templates.md)).
- Используйте сегменты «Новый уровень» в рассылках, чтобы поддерживать вовлечённость.

## Отчётность

- Раздел «Бонусы (отчёты)» показывает распределение клиентов по уровням и средний чек.
- Журнал `bonus_levels_log` фиксирует все изменения и помогает расследовать спорные ситуации.
